<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>nwfscDiag • nwfscDiag</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="nwfscDiag">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nwfscDiag</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/nwfscDiag.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pfmc-assessments/nwfscDiag/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>nwfscDiag</h1>
                        <h4 data-toc-skip class="author">Chantel
Wetzel</h4>
            
            <h4 data-toc-skip class="date">2024-10-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pfmc-assessments/nwfscDiag/blob/main/vignettes/nwfscDiag.Rmd" class="external-link"><code>vignettes/nwfscDiag.Rmd</code></a></small>
      <div class="hidden name"><code>nwfscDiag.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="nwfscdiag-diagnostic-package-for-west-coast-groundfish-assessments">nwfscDiag: Diagnostic Package for West Coast Groundfish
Assessments<a class="anchor" aria-label="anchor" href="#nwfscdiag-diagnostic-package-for-west-coast-groundfish-assessments"></a>
</h2>
<p>The package provides the functionality to conduct model diagnostics
for Stock Synthesis (SS3) models. The standard diagnostic included in
this package are standard required analysis for U.S. West Coast
Groundfish stock assessments managed by the Pacific Fisheries Management
Council. The package was designed to perform model diagnostics and
create plots and tables in a standardized format. The standardized
approach will facilitate the use of these outputs in the assessment
template approach.</p>
<p>The diagnostics created by the package are: - jitter runs to ensure
model convergence at the Maximum Likelihood Estimate (MLE), -
retrospective runs to examine model sensitivity to recent data,
and<br>
- likelihood profiles across parameters.</p>
<p>This package does not maintain backward compatibility with previous
versions of Stock Synthesis. However, if needed user can download older
package versions that may work with older versions (3.30.+) of Stock
Synthesis.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>nwfscDiag can be installed via github:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pfmc-assessments/nwfscDiag"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="running-the-code">Running the code<a class="anchor" aria-label="anchor" href="#running-the-code"></a>
</h3>
<p>The package depends upon a few other packages and they should be
installed upon installation of the package. The dependent packages
are:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'dplyr'</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'r4ss/r4ss'</span><span class="op">)</span></span></code></pre>
<p>A new version of r4ss package was released on July 29, 2022 that
included some significant changes that are required for the current
version of <code>nwfscDiag</code> to run. The current version of the
nwfscDiag 1.1.2 package is designed to work with the latest release of
r4ss. Please see release version 1.0.1 to use earlier versions of
r4ss.</p>
</div>
<div class="section level3">
<h3 id="example-run-all-diagnostics">Example: Run all diagnostics<a class="anchor" aria-label="anchor" href="#example-run-all-diagnostics"></a>
</h3>
<p>First, you should specify the directory where the base model is
located and where the diagnostics will be run and the name of the base
model folder:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pfmc-assessments/nwfscDiag" class="external-link">nwfscDiag</a></span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="st">"C:/your directory"</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span></code></pre>
<p>Another way to do handle directory management is by using a project
file and the <code>here</code> package:</p>
<pre><code><span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"models"</span><span class="op">)</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span></code></pre>
<p>The <code><a href="../reference/get_settings_profile.html">get_settings_profile()</a></code> specifies which parameters to
run a profile for and the parameter ranges for each profile. The low and
high values can be specified in 3 ways:</p>
<ul>
<li>as a ‘multiplier’ where a percent where the low and high range will
be specified as x% of the base parameter (i.e., (base parameter - base
parameter* x) - (base parameter + base parameter * x)),</li>
<li>in ‘real’ space where the low and high values are in the parameter
space, and</li>
<li>as ‘relative’ where the low and high is a specified amount relative
to the base model parameter (i.e., (base parameter - x) - (base
parameter + x).</li>
</ul>
<p>Specify the parameters to profile over along with the parameter range
and step size:</p>
<pre><code><span><span class="va">profile_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings_profile.html">get_settings_profile</a></span><span class="op">(</span> </span>
<span>  parameters <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NatM_uniform_Fem_GP_1"</span>, <span class="st">"SR_BH_steep"</span>, <span class="st">"SR_LN(R0)"</span><span class="op">)</span>,</span>
<span>  low <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.40</span>, <span class="fl">0.25</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>  high <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.40</span>, <span class="fl">1.0</span>,  <span class="fl">2</span><span class="op">)</span>,</span>
<span>  step_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.05</span>, <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>  param_space <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'multiplier'</span>, <span class="st">'real'</span>, <span class="st">'relative'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre>
<p>The <code>parameters</code> function argument specifies the
parameters to profile over where the string provided should match the
string label in the SS3 control file. The <code>low</code>,
<code>high</code>, <code>step_size</code>, and <code>param_space</code>
inputs should be vectors of equal length to the <code>parameters</code>
input. The above example will profile over female natural mortality,
steepness, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>.
The female natural mortality parameter profile will range from (base
parameter - base parameter* x) to (base parameter + base parameter * x)
in steps of 0.005, the steepness parameter profile will range from 0.25
to 1.0 in step size of 0.05, and the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>
parameter profile will range from
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>
- 0.25) to
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>
+ 0.25) in step size of 0.25.</p>
<p>Next the settings for running the profiles, jitter, and
retrospectives within <code>r4ss</code> needs to be specified using
<code><a href="../reference/get_settings.html">get_settings()</a></code>:</p>
<pre><code><span><span class="va">model_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings.html">get_settings</a></span><span class="op">(</span></span>
<span>  settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    base_name <span class="op">=</span> <span class="va">base_model_name</span>,</span>
<span>      run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jitter"</span>, <span class="st">"profile"</span>, <span class="st">"retro"</span><span class="op">)</span>,</span>
<span>      profile_details <span class="op">=</span> <span class="va">profile_info</span> <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre>
<p>where the above example requests jitters, profiles, and retrospective
models to be run for the model file specified above as the
<code>base_model_name</code> with the profile setting set using
<code><a href="../reference/get_settings_profile.html">get_settings_profile()</a></code> above. Calling
<code>model_settings</code> in the R terminal will show all default
settings.</p>
<p>If <code>profile</code> is included in the run requested and
<code>verbose = TRUE</code> in the <code>model_settings()</code> the
values for each parameter profiled across will be printed to the screen.
Reviewing this information prior to running all diagnostics can be
useful to ensure the parameter range and step size was set
correctly.</p>
<p>Run all diagnostics:</p>
<pre><code><span><span class="fu"><a href="../reference/run_diagnostics.html">run_diagnostics</a></span><span class="op">(</span>mydir <span class="op">=</span> <span class="va">directory</span>, model_settings <span class="op">=</span> <span class="va">model_settings</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="example-run-a-single-profile">Example: Run a single profile<a class="anchor" aria-label="anchor" href="#example-run-a-single-profile"></a>
</h3>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pfmc-assessments/nwfscDiag" class="external-link">nwfscDiag</a></span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"models"</span><span class="op">)</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span>
<span></span>
<span><span class="va">profile_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings_profile.html">get_settings_profile</a></span><span class="op">(</span> </span>
<span>  parameters <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SR_BH_steep"</span><span class="op">)</span>,</span>
<span>    low <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span><span class="op">)</span>,</span>
<span>    high <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>    step_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span><span class="op">)</span>,</span>
<span>    param_space <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'real'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">model_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings.html">get_settings</a></span><span class="op">(</span></span>
<span>  settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    base_name <span class="op">=</span> <span class="va">base_model_name</span>,</span>
<span>        run <span class="op">=</span> <span class="st">"profile"</span>,</span>
<span>        profile_details <span class="op">=</span> <span class="va">profile_settings</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/run_diagnostics.html">run_diagnostics</a></span><span class="op">(</span>mydir <span class="op">=</span> <span class="va">directory</span>, model_settings <span class="op">=</span> <span class="va">model_settings</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="example-run-jitters">Example: Run jitters<a class="anchor" aria-label="anchor" href="#example-run-jitters"></a>
</h3>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pfmc-assessments/nwfscDiag" class="external-link">nwfscDiag</a></span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"models"</span><span class="op">)</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span>
<span></span>
<span><span class="va">model_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings.html">get_settings</a></span><span class="op">(</span></span>
<span>  settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    base_name <span class="op">=</span> <span class="va">base_model_name</span>,</span>
<span>        run <span class="op">=</span> <span class="st">"jitter"</span>,</span>
<span>        Njitter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>        jitter_fraction <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/run_diagnostics.html">run_diagnostics</a></span><span class="op">(</span>mydir <span class="op">=</span> <span class="va">directory</span>, model_settings <span class="op">=</span> <span class="va">model_settings</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="example-run-retrospectives">Example: Run retrospectives<a class="anchor" aria-label="anchor" href="#example-run-retrospectives"></a>
</h3>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pfmc-assessments/nwfscDiag" class="external-link">nwfscDiag</a></span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"models"</span><span class="op">)</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span>
<span></span>
<span><span class="va">model_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings.html">get_settings</a></span><span class="op">(</span></span>
<span>  settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    base_name <span class="op">=</span> <span class="va">base_model_name</span>,</span>
<span>        run <span class="op">=</span> <span class="st">"retro"</span>,</span>
<span>        retro_yrs <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/run_diagnostics.html">run_diagnostics</a></span><span class="op">(</span>mydir <span class="op">=</span> <span class="va">directory</span>, model_settings <span class="op">=</span> <span class="va">model_settings</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="example-rerun-select-values-for-a-profile">Example: Rerun select values for a profile<a class="anchor" aria-label="anchor" href="#example-rerun-select-values-for-a-profile"></a>
</h3>
<p>There are instances where not all models runs within a parameter
profile converge. In this case one needs to rerun only select models
that failed to converge in the profile. The
<code><a href="../reference/rerun_profile_vals.html">rerun_profile_vals()</a></code> function allows users to do this.</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pfmc-assessments/nwfscDiag" class="external-link">nwfscDiag</a></span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"models"</span><span class="op">)</span></span>
<span><span class="va">base_model_name</span> <span class="op">&lt;-</span> <span class="st">"base model"</span></span>
<span><span class="fu"><a href="../reference/rerun_profile_vals.html">rerun_profile_vals</a></span><span class="op">(</span></span>
<span>  mydir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">model_dir</span>, <span class="va">base_name</span><span class="op">)</span>,</span>
<span>  model_settings <span class="op">=</span> <span class="va">model_settings</span>,</span>
<span>  para_name <span class="op">=</span>  <span class="st">"SR_LN(R0)"</span>,</span>
<span>  run_num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">4</span>,<span class="fl">3</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span>  data_file_nm <span class="op">=</span> <span class="st">"base_model_data_file.dat"</span><span class="op">)</span></span></code></pre>
<p>where the <code>run_num</code> is the number reported in the
profile_SR_LN(RO))_results.csv file under the run column. Profiles are
run out from the base model parameter value to lower or higher values to
improve model convergence and hence, the run number reported in the csv
is not sequential from the lower to upper bounds.</p>
</div>
<div class="section level3">
<h3 id="example-run-jitters-in-parrallel">Example: Run jitters in parrallel<a class="anchor" aria-label="anchor" href="#example-run-jitters-in-parrallel"></a>
</h3>
<p><code>r4ss</code> v1.49.3+ supports running models in parallel. This
can be particularly helpful when running jitters. In order to run
jitters in parallel, additional specifications are needed outside the
<code>nwfscDiag</code> package and some additional R packages
(<code>parallelly</code>, <code>future</code>) need to be installed:</p>
<pre><code><span><span class="va">ncores</span> <span class="op">&lt;-</span> <span class="fu">parallelly</span><span class="fu">::</span><span class="fu"><a href="https://parallelly.futureverse.org/reference/availableCores.html" class="external-link">availableCores</a></span><span class="op">(</span>omit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span>, workers <span class="op">=</span> <span class="va">ncores</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_settings.html">get_settings</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  exe <span class="op">=</span> <span class="st">"ss3"</span>,</span>
<span>  base_name <span class="op">=</span> <span class="va">base_model</span>,</span>
<span>  run <span class="op">=</span> <span class="st">"jitter"</span>,</span>
<span>  Njitter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  jitter_fraction <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/run_diagnostics.html">run_diagnostics</a></span><span class="op">(</span>mydir <span class="op">=</span> <span class="va">dir</span>, model_settings <span class="op">=</span> <span class="va">model_settings</span><span class="op">)</span></span>
<span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></span><span class="op">)</span></span></code></pre>
<p>This same approach could be done with profiles, but is not
recommended for models with convergence issues.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Chantel Wetzel.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
